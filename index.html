<html>
    <head>
        <!-- <meta lang="en"> -->
        <meta charset="utf-8">
        <meta name="full-screen" content="yes">
        <meta name="viewport" content="user-scalable=no, width=device-width" />
        <!-- <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"> -->
        <link rel="stylesheet" href="./navStyle.css">
        <title>CG Project</title>

        <script type='text/javascript' src="./src/webgl-obj-loader.js"></script>
        <script type='text/javascript' src="./src/webgl-lessons-ui.js"></script>
        <script type='text/javascript' src="./src/virtualjoystick.js"></script>
        <script type='module' src="./src/ui.js"></script>
        <script type="module" src="./src/main.js"></script>
        <script type="module" src="./src/interaction.js"></script>

        <style>
        body {
            background-color: "black";
            overflow: hidden;
        }
		#container {
			position: fixed;
            height: 100%;
            width: 100%;
            top: 0;
            overflow: hidden;
            /* overflow-x: hidden; */
            /* -webkit-overflow-scrolling: touch; */
		}
        #uiContainer {
        position: absolute;
        top: 50px;
        right: 10px;
        z-index: 3;
        font-family: monospace;
        pointer-events: none;

        text-shadow:
        -1px -1px 0 #FFF,
            1px -1px 0 #FFF,
            -1px 1px 0 #FFF,
            1px 1px 0 #FFF;
        }
        #ui {
        opacity: 0.8;
        }
        #ui>div {
        pointer-events: none;
        }
        #ui input, #ui select, #ui option, #ui canvas {
        pointer-events: auto;
        }
		</style>
    </head>
    <body>
        <!-- Navigation bar -->
        <header class="nav-container">
            <h1 class="nav-header">
                <text class="nav-item is-header-item">Demo</text>
            </h1>

            <nav class="nav-menu-wrapper">
                <span class="nav-item is-menu-item menu-icon" onclick="return false;"></span>

                <ul class="nav-menu-list">
                    <li><button id="pauseButton" class="nav-item" onclick="showMenu();">Pause</button></li>
                    <li><button id="OBJButton" class="nav-item" style="visibility: visible;" onclick="exportOBJ();">Export</button></li>
                    <li><button id="lightButton" class="nav-item" style="visibility: visible;" onclick="editLight();">Edit Light</button></li>
                    <li><button id="navButton" class="nav-item" style="visibility: visible;" onclick="navigationModeOn();">Enable Navigation</button></li>
                </ul>

                <ul class="nav-menu-list">
                    <!-- <li><a href="https://webgl-shaders.com/about.html" class="nav-item">About</a></li>
                    <li><a href="https://github.com/jagracar/webgl-shader-examples" class="nav-item"><span class="github-icon"></span>
                            Github</a></li> -->
                </ul>
            </nav>
        </header>

        <script>
            window.navMode = false;
            window.pauseCond = false;
            var editLightCond = false;
            var exportOBJCond = false;
            var showMenu = function()
            {
                window.pauseCond = !window.pauseCond;
                item = document.getElementById('pauseButton');
                if(window.pauseCond)
                {
                    item.innerHTML = "Continue";
                }
                else
                {
                    item.innerHTML = "Pause";
                }
            }

            var editLight = function()
            {
                editLightCond = !editLightCond;
                var item = document.getElementById('lightButton');
                var ui = document.getElementById('Light');
                if(editLightCond)
                {
                    editOBJSizeCond = false;
                    item.innerHTML = "Close";
                    ui.style.visibility = "visible";
                }
                else
                {
                    item.innerHTML = "Light";
                    ui.style.visibility = "hidden";
                }
            }

            exportOBJ = function()
            {
                exportOBJCond = true;
                var item = document.getElementById('OBJButton');

                if(exportOBJCond)
                {
                    item.innerHTML = "Loading...";
                }
                else
                {
                    item.innerHTML = "Edit OBJ Size";
                }
            }

            navigationModeOn = function()
            {
                item = document.getElementById('navButton');
                window.navMode = !window.navMode;
                if(window.navMode)
                    item.innerHTML = "Disable Navigation";
                else
                    item.innerHTML = "Enable Navigation";
            }
        </script>
    
        <div id="joy_container" style="position: absolute; left: 10%; top: 60%; width: 200px; height: 200px;z-index: 1;">
        
        </div>
        <div id="container">
            <canvas id="c" style=" width: 100%; height: 100%;"></canvas>
            
            <script>
                    var BX = document.body.clientWidth * 0.1;
                    var BY = document.body.clientHeight * 0.6;
                    console.log(BX, BY);
                    
                    var joystick = new VirtualJoystick({
                        container:  document.getElementById('joy_container'),
                        mouseSupport: true,
                        stationaryBase: true,
                                baseX: 100,
                                baseY: 100,
                        limitStickTravel: true,
                        stickRadius: 50,
                        biasX: BX,
                        biasY: BY
                    });
            </script>

            <div id="uiContainer">
                <div id="ui">
                    <div id="Light" style="visibility: hidden;"></div>
                </div>
            </div>


            <div style="position: absolute; right: 3%; bottom: 10%;">
                <div style="color: pink; text-align: center; width: 300px; margin: 0 auto;">
                    <p style="font-size: 10px; border: 5px solid">
                        Camera Navigation Demo
                    </p>
                    <p>
                        WSADEQ -- Front Back Left Right Up Down
                    </p>
                    <p>
                        IKJL/Slide Screen -- Change Sight View
                    </p>
                </div>
                
                <div style="text-align: center; font-size: 20px;">
                    <ul>
                        <li><a href="./pages/Flight/Flight.html">Flight</a></li>
                        <li><a href="./pages/Preview/Preview.html">Shader Preview</a></li>
                        <li><a href="http://code.vtu.life"> Back</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </body>
</html>
